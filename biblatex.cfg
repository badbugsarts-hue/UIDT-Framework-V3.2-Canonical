% biblatex.cfg - Optimized Configuration for UIDT Manuscript
% ----------------------------------------------------------
% Author: Philipp Rietz
% Context: UIDT v3.3 Canonical / Physics & Math Layout

\ProvidesFile{biblatex.cfg}

% 1. Global Options
% -----------------
% sorting=none matches standard Physics ordering (by appearance).
% backend=biber is required for advanced features.
\ExecuteBibliographyOptions{
  giveninits=true,     % F. Lastname instead of Firstname
  uniquename=init,     % Disambiguate with initials only
  maxcitenames=3,      % et al. after 3 authors in text
  mincitenames=1,
  maxbibnames=99,      % List ALL authors in bibliography (important for credit)
  date=year,           % Show only year in citations
  urldate=iso,         % ISO format for access dates
  isbn=false,          % Hide ISBN to reduce clutter
  url=true,            % Show URLs (crucial for Open Science)
  doi=true,            % Show DOIs
  eprint=true,         % Show arXiv/Preprint IDs
  sorting=none,        % Sort by appearance order (Standard for Physics/Nature)
  backref=true         % Link back from bibliography to page number
}

% 2. Field Formatting (Hyperlinks)
% --------------------------------
% Makes DOI, URL, and arXiv links clickable and clean.

% Clean DOI format with link
\DeclareFieldFormat{doi}{%
  \textsc{doi}\addcolon\space
  \ifhyperref
    {\href{https://doi.org/#1}{\nolinkurl{#1}}}
    {\nolinkurl{#1}}%
}

% Clean URL format
\DeclareFieldFormat{url}{%
  \mkbibacro{URL}\addcolon\space
  \ifhyperref
    {\href{#1}{\nolinkurl{#1}}}
    {\nolinkurl{#1}}%
}

% Clean arXiv/ePrint format
\DeclareFieldFormat{eprint}{%
  \textsc{eprint}\addcolon\space
  \ifhyperref
    {\href{https://arxiv.org/abs/#1}{#1}}
    {#1}%
}

% Remove "In:" for Articles (Cleaner, Physics-style)
\renewbibmacro{in:}{%
  \ifentrytype{article}{}{\printtext{\bibstring{in}\intitlepunct}}}

% 3. Type Aliases (FIXED)
% -----------------------
% WARNING: You cannot alias specific citation keys (like uidt2024). 
% You must alias entry TYPES. 
% Mapping 'software' and 'techreport' to standard types ensures compatibility.

\DeclareBibliographyAlias{software}{misc}      % Handle @software as @misc
\DeclareBibliographyAlias{report}{techreport}  % Handle @report as @techreport

% 4. Custom Collaboration Handling
% --------------------------------
% Defines how "Collaboration" fields are printed if 'usera' field is used.

\DeclareNameFormat{collaboration}{%
  \iffieldundef{usera}{%
    \textsc{\namepartfamily} Collaboration%
  }{%
    \textsc{\strfield{usera}} Collaboration%
  }%
  \namepartgiveni\namepartprefix\namepartsuffix%
  \ifthenelse{\value{listcount}<\value{liststop}}
    {\addcomma\space}
    {}%
}

\endinput